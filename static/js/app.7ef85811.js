(function(){var e={346:function(e,t,r){"use strict";var o=r(2181),n=r(8165),a=r(8204),l=r(6442),c=r(6034),u=r(191),s=r(4367),i=r(6054),d=r(3683),m=r(6623),f=r(7524);r(9910);function p(e){return e.use(n.z).use(a.II).use(l.R).use(c.g).use(u.G).use(s.Ph).use(i.Z).use(d.z).use(d.e).use(m.u).use(f.g)}var g=r(6492),h=r(9994),v=r(2185),w=(r(1603),r(8129),r(4461),r(1080),r(7888),r(5825),r(8796),r(1875),r(2824),r(9609),r(2511),r(5806)),b=r(7216),U=r(2775);function y(e="info",t={}){return(0,U.Z)(e,{content:"",duration:2e3,...t})}function k(e){if(!e)return console.error("转换失败：参数为空"),null;try{let t=e.split(","),r=t[0].match(/:(.*?);/)[1],o=atob(t[1]),n=o.length,a=new Uint8Array(n);while(n-- >0)a[n]=o.charCodeAt(n);return new Blob([a],{type:r})}catch(t){return console.error("转换失败，可能是参数错误："),console.error(t),null}}function _(e){return e?new Promise((t=>{const r=new Image;r.onerror=function(){console.error("转换失败：参数错误"),t(null)},r.onload=function(){t(r)},r.src=e})):(console.error("转换失败：参数为空"),Promise.resolve(null))}async function x(e={}){const{colorBackground:t="#FFFFFF",colorForeground:r="#000000",margin:o=10,size:n=256,text:a=""}=e;return new w.AwesomeQR({autoColor:!1,colorDark:"#000000",colorLight:"#FFFFFF",components:{alignment:{scale:1,protectors:!1},cornerAlignment:{scale:1,protectors:!0},data:{scale:1},timing:{scale:1,protectors:!1}},correctLevel:w.QRErrorCorrectLevel.M,margin:o,size:n,text:a,whiteMargin:!1}).draw().then((e=>{if(!e)return{error:new Error("生成结果为空"),result:null,success:!1};const o=S(t),a=S(r),l=document.createElement("canvas"),c=l.getContext("2d");return l.width=n,l.height=n,_(e).then((e=>{if(!e)return null;c.drawImage(e,0,0);let t=c.getImageData(0,0,n,n),r=t.data;for(let n=0;n<r.length;n+=4){let e=r[n],t=r[n+1],l=r[n+2],c=e+t+l;switch(c){case 765:r[n]=o[0],r[n+1]=o[1],r[n+2]=o[2],r[n+3]=255;break;case 0:r[n]=a[0],r[n+1]=a[1],r[n+2]=a[2],r[n+3]=255;break;default:r[n]=a[0],r[n+1]=a[1],r[n+2]=a[2],r[n+3]=128;break}}return c.putImageData(t,0,0),_(l.toDataURL("image/png"))})).then((e=>e?(c.fillStyle=t,c.fillRect(0,0,n,n),c.drawImage(e,0,0),{error:null,result:l.toDataURL("image/png"),success:!0}):{error:null,result:null,success:!1}))})).catch((e=>({error:e,result:null,success:!1})))}function S(e){if(!e)return console.error("转换失败：缺少参数"),[0,0,0,0];let t=document.createElement("canvas"),r=null;t.width=1,t.height=1,r=t.getContext("2d"),r.fillStyle=e,r.fillRect(0,0,1,1);try{let{data:e}=r.getImageData(0,0,1,1);return[e[0],e[1],e[2],e[3]]}catch(o){return console.error("转换失败："),console.error(o),[0,0,0,0]}}function F(){const e=location.search,t=(0,b.parse)(e,{charset:"utf-8",ignoreQueryPrefix:!0});return t}function L(e={}){return(0,b.stringify)(e,{charset:"utf-8",addQueryPrefix:!1})}const R=e=>((0,g.dD)("data-v-baf517ce"),e=e(),(0,g.Cn)(),e),C={class:"qr-encode"},V=["src"],D={class:"code-tips"},j={class:"config-item"},O=R((()=>(0,g._)("span",{class:"label"},"前景色：",-1))),W={class:"config-item"},z=R((()=>(0,g._)("span",{class:"label"},"背景色：",-1))),I={class:"config-item"},q={class:"config-item"};var E={__name:"CodeGenerator",props:{readonly:{type:Boolean,default:!1}},setup(e){const t=(0,h.Um)({codeSize:0,codeURL:"",readonly:!1,colorBackground:"#FFFFFF",colorForeground:"#000000",margin:10,size:256,text:""}),r=(0,g.Fl)((()=>!t.readonly));function n(){const{readonly:e="0",text:r=""}=F();t.readonly="1"===e,t.text=r}function a(){const e=location.origin,r=location.pathname,o=L({readonly:"1",text:t.text}),n=`${e}${r}?${o}`;navigator.clipboard.writeText(n).then((()=>{y("success",{content:"复制成功"})})).catch((()=>{y("error",{content:"复制失败，可能是没有权限"})}))}async function l(){const{error:e,result:r,success:o}=await x(t);o||(console.error("生成二维码失败："),console.error(e));const n=k(r),a=n?URL.createObjectURL(n):null;t.codeURL&&URL.revokeObjectURL(t.codeURL),t.codeSize=t.size,t.codeURL=a}return(0,g.wF)((()=>{n()})),(0,g.bv)((()=>{l()})),(e,n)=>{const c=(0,g.up)("t-button"),u=(0,g.up)("t-tooltip"),s=(0,g.up)("t-card"),i=(0,g.up)("t-textarea"),d=(0,g.up)("t-color-picker"),m=(0,g.up)("t-input-number");return(0,g.wg)(),(0,g.iD)("div",C,[(0,g.Wm)(s,{class:"content-card code-result",title:"二维码预览",bordered:!1,"header-bordered":!0,shadow:!0},(0,g.Nv)({default:(0,g.w5)((()=>[(0,g._)("div",{class:"code-image-wrapper",style:(0,v.j5)({"--code-size":(0,h.SU)(t).codeSize})},[(0,h.SU)(t).codeURL?((0,g.wg)(),(0,g.iD)("img",{key:0,alt:"二维码",class:"code-image",src:(0,h.SU)(t).codeURL},null,8,V)):(0,g.kq)("",!0)],4),(0,g.wy)((0,g._)("div",D,"若您在移动端访问，可尝试长按识别。",512),[[o.F8,(0,h.SU)(t).readonly]])])),_:2},[(0,h.SU)(r)?{name:"actions",fn:(0,g.w5)((()=>[(0,g.Wm)(u,{content:"生成二维码"},{default:(0,g.w5)((()=>[(0,g.Wm)(c,{theme:"primary",variant:"text",onClick:l},{default:(0,g.w5)((()=>[(0,g.Uk)("生成 / 刷新")])),_:1})])),_:1}),(0,g.Wm)(u,{content:"复制二维码预览地址"},{default:(0,g.w5)((()=>[(0,g.Wm)(c,{theme:"primary",variant:"text",onClick:a},{default:(0,g.w5)((()=>[(0,g.Uk)("复制地址")])),_:1})])),_:1})])),key:"0"}:void 0]),1024),(0,h.SU)(r)?((0,g.wg)(),(0,g.j4)(s,{key:0,class:"content-card set-text",title:"二维码内容",bordered:!1,"header-bordered":!0,shadow:!0},{default:(0,g.w5)((()=>[(0,g.Wm)(i,{modelValue:(0,h.SU)(t).text,"onUpdate:modelValue":n[0]||(n[0]=e=>(0,h.SU)(t).text=e)},null,8,["modelValue"])])),_:1})):(0,g.kq)("",!0),(0,h.SU)(r)?((0,g.wg)(),(0,g.j4)(s,{key:1,class:"content-card set-color",title:"二维码颜色",bordered:!1,"header-bordered":!0,shadow:!0},{default:(0,g.w5)((()=>[(0,g._)("div",j,[O,(0,g.Wm)(d,{modelValue:(0,h.SU)(t).colorForeground,"onUpdate:modelValue":n[1]||(n[1]=e=>(0,h.SU)(t).colorForeground=e),"color-modes":["monochrome"],"recent-colors":null,format:"HEX"},null,8,["modelValue"])]),(0,g._)("div",W,[z,(0,g.Wm)(d,{modelValue:(0,h.SU)(t).colorBackground,"onUpdate:modelValue":n[2]||(n[2]=e=>(0,h.SU)(t).colorBackground=e),"color-modes":["monochrome"],"recent-colors":null,format:"HEX"},null,8,["modelValue"])])])),_:1})):(0,g.kq)("",!0),(0,h.SU)(r)?((0,g.wg)(),(0,g.j4)(s,{key:2,class:"content-card set-size",title:"二维码大小",bordered:!1,"header-bordered":!0,shadow:!0},{default:(0,g.w5)((()=>[(0,g._)("div",I,[(0,g.Wm)(m,{modelValue:(0,h.SU)(t).size,"onUpdate:modelValue":n[3]||(n[3]=e=>(0,h.SU)(t).size=e),label:"尺寸：",theme:"column","allow-input-over-limit":!1,"decimal-places":0,min:128,max:1024,step:1},null,8,["modelValue"])]),(0,g._)("div",q,[(0,g.Wm)(m,{modelValue:(0,h.SU)(t).margin,"onUpdate:modelValue":n[4]||(n[4]=e=>(0,h.SU)(t).margin=e),label:"边距：",theme:"column","allow-input-over-limit":!1,"decimal-places":0,min:0,max:100,step:1},null,8,["modelValue"])])])),_:1})):(0,g.kq)("",!0)])}}},T=r(1164);const P=(0,T.Z)(E,[["__scopeId","data-v-baf517ce"]]);var A=P,B=(r(9694),r(7)),H=r.n(B);const K=e=>((0,g.dD)("data-v-dc677978"),e=e(),(0,g.Cn)(),e),Q={class:"qr-decode"},Z=K((()=>(0,g._)("div",{class:"code-tips"},[(0,g._)("span",null,"支持复制二维码图片后直接在此处粘贴（Ctrl + V）进行解析。")],-1)));var M={__name:"CodeReader",setup(e){const t=(0,h.Um)({files:[],imageURL:"",text:""});function r(e){const t=e.clipboardData,r=t?t.items:null;let n=null;if(r){for(let e=0;e<r.length;e++){let t=r[e];if("file"===t.kind&&t.type.includes("image/")){n=t.getAsFile();break}}n?o({raw:n}):y("warning",{content:"剪贴板中没有图片",duration:2e3})}}function o(e){if(!e)return Promise.resolve({error:"参数错误",status:"fail"});const r=e.raw,o=URL.createObjectURL(r);return t.imageURL&&URL.revokeObjectURL(t.imageURL),t.imageURL=o,n(o),Promise.resolve({status:"success",response:{url:o}})}function n(e=""){let r=document.createElement("canvas"),o=null,n=new Image;n.onload=function(){const e=n.naturalWidth,a=n.naturalHeight;r.width=e,r.height=a,o=r.getContext("2d"),o.drawImage(n,0,0);const l=o.getImageData(0,0,e,a),c=H()(l.data,e,a);c?(y("success",{content:"解析成功",duration:2e3}),t.text=c.data):(y("warning",{content:"未在图片中识别到二维码",duration:2e3}),t.text="")},n.src=e}return(0,g.bv)((()=>{document.addEventListener("paste",r)})),(0,g.Jd)((()=>{document.removeEventListener("paste",r)})),(e,r)=>{const n=(0,g.up)("t-upload"),a=(0,g.up)("t-card"),l=(0,g.up)("t-textarea");return(0,g.wg)(),(0,g.iD)("div",Q,[(0,g.Wm)(a,{class:"content-card code-picker",title:"选择图片",bordered:!1,"header-bordered":!0,shadow:!0},{default:(0,g.w5)((()=>[(0,g.Wm)(n,{modelValue:(0,h.SU)(t).files,"onUpdate:modelValue":r[0]||(r[0]=e=>(0,h.SU)(t).files=e),accept:"image/*",theme:"image","auto-upload":!0,multiple:!1,"request-method":o,draggable:""},null,8,["modelValue"]),Z])),_:1}),(0,g.Wm)(a,{class:"content-card code-result",title:"识别结果",bordered:!1,"header-bordered":!0,shadow:!0},{default:(0,g.w5)((()=>[(0,g.Wm)(l,{modelValue:(0,h.SU)(t).text,"onUpdate:modelValue":r[1]||(r[1]=e=>(0,h.SU)(t).text=e),readonly:""},null,8,["modelValue"])])),_:1})])}}};const X=(0,T.Z)(M,[["__scopeId","data-v-dc677978"]]);var $=X;const G={class:"app-header"},Y={class:"app-wrapper"},J=["textContent","onClick"],N={class:"app-content"};var ee={__name:"App",setup(e){const t=(0,h.Um)({currTabComponent:null,currTabKey:""}),r=(0,h.Xl)([{key:"encode",label:"生成",c:A},{key:"decode",label:"解析",c:$}]);function o(){n(r[0])}function n(e={}){t.currTabComponent=e.c,t.currTabKey=e.key}return(0,g.bv)((()=>{o()})),(e,o)=>((0,g.wg)(),(0,g.iD)(g.HY,null,[(0,g._)("div",G,[(0,g._)("div",Y,[((0,g.wg)(!0),(0,g.iD)(g.HY,null,(0,g.Ko)((0,h.SU)(r),(e=>((0,g.wg)(),(0,g.iD)("div",{textContent:(0,v.zw)(e.label),key:e.key,class:(0,v.C_)([{active:(0,h.SU)(t).currTabKey===e.key},"tab-item"]),onClick:t=>n(e)},null,10,J)))),128))])]),(0,g._)("div",N,[(0,h.SU)(t).currTabComponent?((0,g.wg)(),(0,g.j4)((0,g.LL)((0,h.SU)(t).currTabComponent),{key:0,class:"app-wrapper"})):(0,g.kq)("",!0)])],64))}};const te=ee;var re=te;const oe=(0,o.ri)(re);p(oe).mount("#app")},1129:function(){}},t={};function r(o){var n=t[o];if(void 0!==n)return n.exports;var a=t[o]={exports:{}};return e[o].call(a.exports,a,a.exports,r),a.exports}r.m=e,function(){var e=[];r.O=function(t,o,n,a){if(!o){var l=1/0;for(i=0;i<e.length;i++){o=e[i][0],n=e[i][1],a=e[i][2];for(var c=!0,u=0;u<o.length;u++)(!1&a||l>=a)&&Object.keys(r.O).every((function(e){return r.O[e](o[u])}))?o.splice(u--,1):(c=!1,a<l&&(l=a));if(c){e.splice(i--,1);var s=n();void 0!==s&&(t=s)}}return t}a=a||0;for(var i=e.length;i>0&&e[i-1][2]>a;i--)e[i]=e[i-1];e[i]=[o,n,a]}}(),function(){r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,{a:t}),t}}(),function(){r.d=function(e,t){for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};r.O.j=function(t){return 0===e[t]};var t=function(t,o){var n,a,l=o[0],c=o[1],u=o[2],s=0;if(l.some((function(t){return 0!==e[t]}))){for(n in c)r.o(c,n)&&(r.m[n]=c[n]);if(u)var i=u(r)}for(t&&t(o);s<l.length;s++)a=l[s],r.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return r.O(i)},o=self["webpackChunkqrcode_tool"]=self["webpackChunkqrcode_tool"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=r.O(void 0,[998],(function(){return r(346)}));o=r.O(o)})();